{% extends 'base.html.twig' %}

{% block title %} Rejestracja {% endblock %}

{% block body %}
    <div class="container registration-form">
        {% for label, messages in app.flashes(['success', 'fail']) %}
            {% for message in messages %}
                <div class="flash-{{ label }}">
                    {{ message }}
                </div>
            {% endfor %}
        {% endfor %}
            {{ form_start(form, {'attr': {'class': 'form', 'autocomplete':'off', 'novalidate': 'true'}}) }}
          
            <div class="form-title">
                <h2>Rejestracja</h2>
            </div>
            <p class="form-desc">Zarejestruj się by móc rezerwować wizyty i otrzymywać powiadomienia o zbliżających się terminach.</p>
            <div class="form-subtitle">
                <h3>Dane logowania</h3>
            </div>
            <div class="form-item-col">
                {{ form_label(form.email, 'E-mail', {'attr': {'class' : 'form-label'}} ) }}
                {% if form_errors(form.email) %}
                    {{ form_widget(form.email, {'attr': {'class' : 'form-input form-input--error'}} ) }}
                {% else %}
                    {{ form_widget(form.email, {'attr': {'class' : 'form-input'}} ) }}
                {% endif %}
                <span class="form-error">{{ form_errors(form.email) }}</span>
            </div>
            <div class="form-item-col">
                {{ form_label(form.password.first, 'Hasło', {'attr': {'class' : 'form-label'}} ) }}
                {% if form_errors(form.password.first) %}
                    {{ form_widget(form.password.first, {'attr': {'class' : 'form-input form-input--error'}} ) }}
                {% else %}
                    {{ form_widget(form.password.first, {'attr': {'class' : 'form-input'}} ) }}
                {% endif %}
            </div>
            <div class="form-item-col">
                {{ form_label(form.password.second, 'Powtórz hasło', {'attr': {'class' : 'form-label'}} ) }}
                {% if form_errors(form.password.first) %}
                    {{ form_widget(form.password.second, {'attr': {'class' : 'form-input form-input--error'}} ) }}
                {% else %}
                    {{ form_widget(form.password.second, {'attr': {'class' : 'form-input'}} ) }}
                {% endif %}
                <span class="form-error">{{ form_errors(form.password.first) }}</span>
            </div>
            <div class="form-subtitle">
                <h3>Dane personalne</h3>
            </div>
            <div class="form-item-row">
                <div class="form-item-col name">
                    {{ form_label(form.name, 'Imię', {'attr': {'class' : 'form-label'}} ) }}
                    {% if form_errors(form.name) %}
                        {{ form_widget(form.name, {'attr': {'class' : 'form-input form-input--error'}} ) }}
                    {% else %}
                        {{ form_widget(form.name, {'attr': {'class' : 'form-input'}} ) }}
                    {% endif %}
                    <span class="form-error">{{ form_errors(form.name) }}</span>
                </div>
                <div class="form-item-col last-name">
                    {{ form_label(form.lastName, 'Nazwisko', {'attr': {'class' : 'form-label'}} ) }}
                    {% if form_errors(form.lastName) %}
                        {{ form_widget(form.lastName, {'attr': {'class' : 'form-input form-input--error'}} ) }}
                    {% else %}
                        {{ form_widget(form.lastName, {'attr': {'class' : 'form-input'}} ) }}
                    {% endif %}
                    <span class="form-error">{{ form_errors(form.lastName) }}</span>
                </div>
            </div>
            <div class="form-item-col">
                {{ form_label(form.numPhone, 'Numer telefonu', {'attr': {'class' : 'form-label'}} ) }}
                {% if form_errors(form.numPhone) %}
                    {{ form_widget(form.numPhone, {'attr': {'maxlength' : '9', 'class' : 'form-input form-input--error'}} ) }}
                {% else %}
                    {{ form_widget(form.numPhone, {'attr': {'maxlength' : '9', 'class' : 'form-input'}} ) }}
                {% endif %}
                <span class="form-error">{{ form_errors(form.numPhone) }}</span>
            </div>
            <div class="form-item-col">
                {{ form_label(form.PESEL, 'Numer PESEL', {'attr': {'class' : 'form-label'}} ) }}
                {% if form_errors(form.PESEL) %}
                    {{ form_widget(form.PESEL, {'attr': {'maxlength' : '11', 'class' : 'form-input form-input--error'}} ) }}
                {% else %}
                    {{ form_widget(form.PESEL, {'attr': {'maxlength' : '11', 'class' : 'form-input'}} ) }}
                {% endif %}
                <span class="form-error">{{ form_errors(form.PESEL) }}</span>
            </div>
            {# <div class="form-item-col">
                {{ form_label(form.birthday, 'Data urodzenia', {'attr': {'class' : 'form-label'}} ) }}
                {% if form_errors(form.birthday) or form_errors(form) %}
                    {{ form_widget(form.birthday.day, {'attr': {'class' : 'form-input--select --error'}} ) }}
                    {{ form_widget(form.birthday.month, {'attr': {'class' : 'form-input--select --error'}} ) }}
                    {{ form_widget(form.birthday.year, {'attr': {'class' : 'form-input--select --error'}} ) }}
                {% else %}
                    {{ form_widget(form.birthday.day, {'attr': {'class' : 'form-input--select'}} ) }}
                    {{ form_widget(form.birthday.month, {'attr': {'class' : 'form-input--select'}} ) }}
                    {{ form_widget(form.birthday.year, {'attr': {'class' : 'form-input--select '}} ) }}
                {% endif %}
                <span class="form-error">{{ form_errors(form.birthday) }}</span>
                <span class="form-error">{{ form_errors(form) }}</span>
            </div> #}
            <div class="form-subtitle">
                <h3>Miejsce zamieszkania</h3>
            </div>
            <div class="form-item-col">
                {{ form_label(form.address, 'Adres zamieszkania', {'attr': {'class' : 'form-label'}} ) }}
                {% if form_errors(form.address) %}
                    {{ form_widget(form.address, {'attr': {'class' : 'form-input form-input--error'}} ) }}
                {% else %}
                    {{ form_widget(form.address, {'attr': {'class' : 'form-input'}} ) }}
                {% endif %}
                <span class="form-error">{{ form_errors(form.address) }}</span>
            </div>
            <div class="form-item-row">
                <div class="form-item-col city">
                    {{ form_label(form.city, 'Miasto', {'attr': {'class' : 'form-label'}} ) }}
                    {% if form_errors(form.city) %}
                        {{ form_widget(form.city, {'attr': {'class' : 'form-input form-input--error'}} ) }}
                    {% else %}
                        {{ form_widget(form.city, {'attr': {'class' : 'form-input city'}} ) }}
                    {% endif %}
                    <span class="form-error">{{ form_errors(form.city) }}</span>
                </div>
                <div class="form-item-col post-code">
                    {{ form_label(form.postCode, 'Kod pocztowy', {'attr': {'class' : 'form-label'}} ) }}
                    {% if form_errors(form.postCode) %}
                        {{ form_widget(form.postCode, {'attr': {'maxlength' : '6', 'class' : 'form-input form-input--error'}} ) }}
                    {% else %}
                        {{ form_widget(form.postCode, {'attr': {'maxlength' : '6', 'class' : 'form-input post-code'}} ) }}
                    {% endif %}
                    <span class="form-error">{{ form_errors(form.postCode) }}</span>
                </div>
            </div>
            <div class="form-item-col">
                {{ form_label(form.voivodeship, 'Województwo', {'attr': {'class' : 'form-label'}} ) }}
                {% if form_errors(form.voivodeship) %}
                    {{ form_widget(form.voivodeship, {'attr': {'class' : 'form-input--select --error'}} ) }}
                {% else %}
                    {{ form_widget(form.voivodeship, {'attr': {'class' : 'form-input--select'}} ) }}
                {% endif %}
                <span class="form-error">{{ form_errors(form.voivodeship) }}</span>
            </div>
            <div class="form-item-col">
                {{ form_label(form.gender, 'Płeć', {'attr': {'class' : 'form-label'}} ) }}
                {% if form_errors(form.gender) or form_errors(form) %}
                    {{ form_widget(form.gender, {'attr': {'class' : 'form-input--select --error'}} ) }}
                {% else %}
                    {{ form_widget(form.gender, {'attr': {'class' : 'form-input--select'}} ) }}
                {% endif %}
                <span class="form-error">{{ form_errors(form.gender) }}</span>
                <span class="form-error">{{ form_errors(form) }}</span>
            </div>
            <div class="form-item-col checkbox">
                {{ form_label(form.agreeTerms, 'Akceptuję warunki', {'attr': {'class' : 'form-label'}} ) }}
                {{ form_widget(form.agreeTerms, {'attr': {'class' : 'form-input'}} ) }}
                <span class="form-error">{{ form_errors(form.agreeTerms) }}</span>
            </div>
            <div class="form-item-col">
                {{ form_widget(form.submit, {'attr': {'class' : 'form-btn'}} ) }}
            </div>
                
                {{ form_end(form) }}
            
     <!--- form -->
    </div> <!--- container -->

<script>
$("#registration_form_postCode").on("keydown", function(){
        var key = event.keyCode || event.charCode;
        if( key == 8 || key == 46 ){
            if($(this).val().length == 4) {
                $(this).val($(this).val().slice(0,-1));
            }
        }else{
            if($(this).val().length == 2) {
                $(this).val($(this).val() + '-');
            }
        }
 
    });
</script>

{% endblock %}
